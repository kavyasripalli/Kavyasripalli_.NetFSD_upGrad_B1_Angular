<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Expense Tracker</title>
</head>
<body onload="initDB()">

    <h1>Mini Expense Tracker</h1>

    <label>Expense Title:</label>
    <input type="text" id="title"><br><br>

    <label>Amount:</label>
    <input type="number" id="amount"><br><br>

    <label>Date:</label>
    <input type="date" id="date"><br><br>

    <button onclick="addExpense()">Add Expense</button>
    <button onclick="viewExpenses()">View Expenses</button>
    <button onclick="deleteExpense()">Delete Expense</button>

    <h3>Expense List</h3>
    <div id="expenseList"></div>

    <script>

        let db;

        function initDB() {
            db = openDatabase("ExpenseDB", "1.0", "Expense Database", 2 * 1024 * 1024);

            db.transaction(function(tx) {
                tx.executeSql(
                    "CREATE TABLE IF NOT EXISTS expenses (id INTEGER PRIMARY KEY AUTOINCREMENT, title TEXT, amount REAL, date TEXT)"
                );
            }, transactionError);
        }

        function addExpense() {
            let title = document.getElementById("title").value;
            let amount = document.getElementById("amount").value;
            let date = document.getElementById("date").value;

            db.transaction(function(tx) {
                tx.executeSql(
                    "INSERT INTO expenses (title, amount, date) VALUES (?, ?, ?)",
                    [title, amount, date],
                    function() {
                        viewExpenses();
                    },
                    queryError
                );
            }, transactionError);
        }

        function viewExpenses() {
            db.transaction(function(tx) {
                tx.executeSql(
                    "SELECT * FROM expenses",
                    [],
                    function(tx, results) {
                        let output = "";
                        for (let i = 0; i < results.rows.length; i++) {
                            let row = results.rows.item(i);
                            output += "<p>ID: " + row.id +
                                      " | Title: " + row.title +
                                      " | Amount: " + row.amount +
                                      " | Date: " + row.date + "</p>";
                        }
                        document.getElementById("expenseList").innerHTML = output;
                    },
                    queryError
                );
            }, transactionError);
        }

        function deleteExpense() {
            let id = prompt("Enter Expense ID to Delete");

            db.transaction(function(tx) {
                tx.executeSql(
                    "DELETE FROM expenses WHERE id = ?",
                    [id],
                    function() {
                        viewExpenses();
                    },
                    queryError
                );
            }, transactionError);
        }

        function transactionError(error) {
            alert("Transaction Error: " + error.message);
        }

        function queryError(tx, error) {
            alert("Query Error: " + error.message);
        }

    </script>

</body>
</html>